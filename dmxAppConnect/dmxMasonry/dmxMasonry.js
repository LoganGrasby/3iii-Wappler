/*!
 DMXzone Masonry
 Version: 1.0.2
 (c) 2019 DMXzone.com
 @build 2019-06-20 13:50:22
 */
dmx.Component("masonry",{extends:"repeat",constructor:function(t,e){this.reflow=dmx.debounce(this.reflow.bind(this)),this.breakpoints={sm:480,md:768,lg:992,xl:1200},dmx.BaseComponent.call(this,t,e)},attributes:{columns:{type:Number,default:4},"columns-sm":{type:Number,default:null},"columns-md":{type:Number,default:null},"columns-lg":{type:Number,default:null},"columns-xl":{type:Number,default:null},gutter:{type:Number,default:15},"gutter-sm":{type:Number,default:null},"gutter-md":{type:Number,default:null},"gutter-lg":{type:Number,default:null},"gutter-xl":{type:Number,default:null},"preserve-order":{type:Boolean,default:!1},animated:{type:Boolean,default:!1},"animation-duration":{type:Number,default:400}},methods:{reflow:function(){this.reflow()}},render:function(t){dmx.Component("repeat").prototype.render.call(this,t),this.$node.style.setProperty("position","relative"),window.addEventListener("resize",this.reflow.bind(this))},updated:function(){this.reflow()},reflow:function(){if(this.children.length&&!this.insideReflow){dmx.array(this.$node.querySelectorAll("img")).forEach(function(t){t.dmxMasonry||(t.addEventListener("load",this.reflow.bind(this)),t.src&&(t.src=t.src),t.dmxMasonry=!0)},this);var e=window.innerWidth,o=this.props.columns,s=this.props.gutter;["sm","md","lg","xl"].forEach(function(t){e>=this.breakpoints[t]&&(o=this.props["columns-"+t]||o,s=this.props["gutter-"+t]||s)},this);var t=dmx.array(this.$node.childNodes).filter(function(t){return 1===t.nodeType}),r=window.getComputedStyle(this.$node),n=parseFloat(r.paddingLeft),i=parseFloat(r.paddingRight),l=Math.floor((this.$node.clientWidth-n-i-(o-1)*s)/o);t.forEach(function(t){t.style.setProperty("box-sizing","border-box"),t.style.setProperty("width",l+"px")},this),this.insideReflow=!0;try{window.dispatchEvent(new Event("resize"))}catch(t){var a=document.createEvent("Event");a.initEvent("resize",!1,!1),window.dispatchEvent(a)}this.insideReflow=!1;var d=Array.apply(null,Array(o)).map(function(){return 0}),u=t.map(function(t){return t.clientHeight});t.forEach(function(t,e){var r=this.props["preserve-order"]?e%o:d.indexOf(Math.min.apply(Math,d)),n=r*l+r*s,i=d[r];t.style.setProperty("transform","translate3d("+n+"px, "+i+"px, 0px)"),u[e]&&(t.dmxMasonryInit||(t.style.setProperty("position","absolute"),this.props.animated&&t.style.setProperty("transition","transform "+this.props["animation-duration"]+"ms"),window.requestAnimationFrame(function(){t.style.setProperty("visibility","visible")}),t.dmxMasonryInit=!0),d[r]+=u[e]+s)},this),this.$node.style.setProperty("height",Math.max.apply(Math,d)-s+"px")}}});
//# sourceMappingURL=../maps/dmxMasonry.js.map
